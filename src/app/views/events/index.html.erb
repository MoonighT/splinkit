<div class="row">
  <h1>Featured</h1>
</div>

<div class="row">
  <p class="tweleve tip-bar">
    Wanna have your own event?
    <%= link_to 'Create event', new_event_path, :class=>'in-btn' %>
  </p>
  <% @events.each do |event| %>
  <div class="four columns featured-event">
    <%= link_to '', event, :class=>'event' %>
    <div class="event-meta">
      <h2><%= event.name %></h2>
      <p class="attendee"><%= event.start_date.strftime("%d/%m/%Y") %></p>
      <p><%= event.location %></p>
    </div>
    <div class="shadowbox" style="background-image:url('<%= event.banner_url %>')">
    </div>
  </div>
  <div></div>
    <%# link_to 'Edit', edit_event_path(event) %>
    <%# link_to 'Destroy', event, method: :delete, data: { confirm: 'Are you sure?' } %>
  <% end %>
</div>

<% content_for :js do %>
<script type="text/javascript">
  $(".featured-event").each(function(index) {
    while($(this).find('h2').height() > 92) {
      var current_size = $(this).find('h2').css("font-size");
      var new_size = parseFloat(current_size, 10) - 2;
      $(this).find('h2').css("font-size", new_size);
    }
    var template = Math.floor(Math.random() * 5);
    switch(template) {
      case 0:
        $(this).find('.event-meta').addClass('meta-one');
        break;
      case 1:
        $(this).find('.event-meta').addClass('meta-two');
        break;
      case 2:
        $(this).find('.event-meta').addClass('meta-three'); 
        break;
      case 3:
        $(this).find('.event-meta').addClass('meta-four'); 
        break;
      default:
        $(this).find('.event-meta').addClass('meta-five'); 
        break;
    }
  });
</script>
<% end %>